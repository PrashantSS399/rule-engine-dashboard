
        <!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Deloitte Business Rule Engine</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root {
      --deloitte-green: #86BC25;
      --deloitte-dark-green: #2E7D32;
      --deloitte-dark: #2C2C2C;
      --deloitte-light: #F5F5F5;
    }
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #f8fafc;
    }
    .sidebar {
      width: 280px;
      transition: all 0.3s;
    }
    .main-content {
      margin-left: 280px;
      transition: all 0.3s;
    }
    .table-container {
      max-height: 500px;
    }
    .param-description {
      background-color: #f8fafc;
      border-left: 3px solid var(--deloitte-green);
      padding: 0.75rem;
    }
    .level-badge {
      display: inline-flex;
      align-items: center;
      padding: 0.25rem 0.75rem;
      border-radius: 12px;
      font-weight: 600;
      font-size: 0.75rem;
    }
    .badge-0 {
      background-color: var(--deloitte-green);
      color: white;
    }
    .badge-1 {
      background-color: #FFC72C;
      color: var(--deloitte-dark);
    }
    .badge-2 {
      background-color: #D50000;
      color: white;
    }
    .deloitte-card {
      background: white;
      border-radius: 8px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.05);
      border: 1px solid #e5e7eb;
    }
    .deloitte-btn-primary {
      background-color: var(--deloitte-green);
      color: white;
      transition: all 0.2s;
    }
    .deloitte-btn-primary:hover {
      background-color: var(--deloitte-dark-green);
      transform: translateY(-1px);
    }
    .nav-link.active {
      background-color: rgba(134, 188, 37, 0.1);
      border-left: 3px solid var(--deloitte-green);
      color: var(--deloitte-dark-green);
    }
    .data-table {
      width: 100%;
      border-collapse: collapse;
    }
    .data-table th {
      background-color: #f3f4f6;
      text-align: left;
      padding: 12px;
      font-weight: 600;
      color: #374151;
      border-bottom: 2px solid #e5e7eb;
    }
    .data-table td {
      padding: 12px;
      border-bottom: 1px solid #e5e7eb;
      vertical-align: top;
    }
    .data-table tr:hover {
      background-color: #f9fafb;
    }
    .function-card {
      transition: all 0.2s;
    }
    .function-card:hover {
      border-color: var(--deloitte-green);
      box-shadow: 0 2px 6px rgba(134, 188, 37, 0.1);
    }
  </style>
</head>
<body class="flex h-screen">
  <!-- Sidebar -->
  <div class="sidebar bg-white border-r border-gray-200 fixed h-full">
    <div class="p-4 border-b border-gray-200">
      <div class="flex items-center space-x-2">
        <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M16 32C24.8366 32 32 24.8366 32 16C32 7.16344 24.8366 0 16 0C7.16344 0 0 7.16344 0 16C0 24.8366 7.16344 32 16 32Z" fill="#86BC25"/>
          <path d="M22.4 9.6001H9.6V22.4001H22.4V9.6001Z" fill="white"/>
        </svg>
        <h1 class="text-lg font-bold text-gray-800">Rule Engine</h1>
      </div>
    </div>
    <nav class="p-4">
      <ul class="space-y-1">
        <li>
          <a href="#dashboard" class="nav-link flex items-center px-3 py-2 text-gray-700 rounded hover:bg-gray-100 active">
            <i class="fas fa-tachometer-alt mr-3 w-5 text-center"></i>
            Dashboard
          </a>
        </li>
        <li>
          <a href="#rules" class="nav-link flex items-center px-3 py-2 text-gray-700 rounded hover:bg-gray-100">
            <i class="fas fa-list-ol mr-3 w-5 text-center"></i>
            Business Rules
          </a>
        </li>
        <li>
          <a href="#functions" class="nav-link flex items-center px-3 py-2 text-gray-700 rounded hover:bg-gray-100">
            <i class="fas fa-functions mr-3 w-5 text-center"></i>
            Data Functions
          </a>
        </li>
        <li>
          <a href="#documentation" class="nav-link flex items-center px-3 py-2 text-gray-700 rounded hover:bg-gray-100">
            <i class="fas fa-book mr-3 w-5 text-center"></i>
            Documentation
          </a>
        </li>
      </ul>
    </nav>
  </div>

  <!-- Main Content -->
  <div class="main-content flex-1 overflow-auto">
    <!-- Header -->
    <header class="bg-white border-b border-gray-200 py-4 px-6 sticky top-0 z-10">
      <div class="flex justify-between items-center">
        <h2 class="text-xl font-semibold text-gray-800" id="page-title">Dashboard</h2>
        <div class="flex items-center space-x-4">
          <div class="flex items-center">
            <div class="w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center mr-2">
              <i class="fas fa-user text-gray-600"></i>
            </div>
            <span class="text-sm font-medium">Admin User</span>
          </div>
        </div>
      </div>
    </header>

    <!-- Page Content -->
    <main class="p-6">
      <!-- Dashboard Page -->
      <div id="dashboard-page">
        <div class="mb-8">
          <h2 class="text-2xl font-semibold text-gray-800 mb-2">Rule Engine Dashboard</h2>
          <p class="text-gray-600">Monitor and manage business rules across customer, account, and transaction data.</p>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
          <div class="deloitte-card p-6">
            <div class="flex items-center">
              <div class="p-3 rounded-full bg-green-100 text-green-600 mr-4">
                <i class="fas fa-list-check text-lg"></i>
              </div>
              <div>
                <h3 class="text-sm font-medium text-gray-500 uppercase tracking-wider">Total Rules</h3>
                <p class="text-2xl font-bold text-gray-800">15</p>
              </div>
            </div>
          </div>

          <div class="deloitte-card p-6">
            <div class="flex items-center">
              <div class="p-3 rounded-full bg-blue-100 text-blue-600 mr-4">
                <i class="fas fa-database text-lg"></i>
              </div>
              <div>
                <h3 class="text-sm font-medium text-gray-500 uppercase tracking-wider">Data Functions</h3>
                <p class="text-2xl font-bold text-gray-800">7</p>
              </div>
            </div>
          </div>

          <div class="deloitte-card p-6">
            <div class="flex items-center">
              <div class="p-3 rounded-full bg-purple-100 text-purple-600 mr-4">
                <i class="fas fa-layer-group text-lg"></i>
              </div>
              <div>
                <h3 class="text-sm font-medium text-gray-500 uppercase tracking-wider">Data Levels</h3>
                <p class="text-2xl font-bold text-gray-800">3</p>
              </div>
            </div>
          </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
          <div class="deloitte-card p-6">
            <h3 class="text-lg font-semibold text-gray-800 mb-4">Recent Activity</h3>
            <div class="space-y-4">
              <div class="flex items-start">
                <div class="p-2 rounded-full bg-green-100 text-green-600 mr-3 mt-1">
                  <i class="fas fa-plus text-xs"></i>
                </div>
                <div>
                  <p class="text-sm font-medium">New rule added</p>
                  <p class="text-xs text-gray-500">Rule "high_value_transaction" was created</p>
                  <p class="text-xs text-gray-400">2 hours ago</p>
                </div>
              </div>
              <div class="flex items-start">
                <div class="p-2 rounded-full bg-blue-100 text-blue-600 mr-3 mt-1">
                  <i class="fas fa-play text-xs"></i>
                </div>
                <div>
                  <p class="text-sm font-medium">Rule executed</p>
                  <p class="text-xs text-gray-500">"suspicious_activity" was run successfully</p>
                  <p class="text-xs text-gray-400">5 hours ago</p>
                </div>
              </div>
            </div>
          </div>

          <div class="deloitte-card p-6">
            <h3 class="text-lg font-semibold text-gray-800 mb-4">Quick Actions</h3>
            <div class="grid grid-cols-2 gap-4">
              <a href="#rules" class="deloitte-card p-4 text-center hover:bg-gray-50 transition-colors">
                <div class="p-2 rounded-full bg-gray-100 text-gray-600 mx-auto mb-2">
                  <i class="fas fa-list-ol"></i>
                </div>
                <p class="text-sm font-medium">View Rules</p>
              </a>
              <a href="#functions" class="deloitte-card p-4 text-center hover:bg-gray-50 transition-colors">
                <div class="p-2 rounded-full bg-gray-100 text-gray-600 mx-auto mb-2">
                  <i class="fas fa-functions"></i>
                </div>
                <p class="text-sm font-medium">Run Function</p>
              </a>
            </div>
          </div>
        </div>
      </div>

      <!-- Rules Page -->
      <div id="rules-page" class="hidden">
        <div class="mb-6 flex justify-between items-center">
          <div>
            <h2 class="text-2xl font-semibold text-gray-800 mb-1">Business Rules</h2>
            <p class="text-gray-600">Manage and execute business rules across the system</p>
          </div>
          <button onclick="toggleAddRuleModal()" class="deloitte-btn-primary px-4 py-2 rounded-md font-medium">
            <i class="fas fa-plus mr-2"></i>Add Rule
          </button>
        </div>

        <div class="deloitte-card p-6 mb-6">
          <div class="flex justify-between items-center mb-4">
            <h3 class="text-lg font-semibold text-gray-800">All Rules</h3>
            <div class="relative">
              <input type="text" placeholder="Search rules..." class="border px-3 py-1 rounded-md text-sm pl-8">
              <i class="fas fa-search absolute left-3 top-2 text-gray-400"></i>
            </div>
          </div>

          <div class="overflow-x-auto">
            <table class="data-table">
              <thead>
                <tr>
                  <th>ID</th>
                  <th>Description</th>
                  <th>Level</th>
                  <th>Function</th>
                  <th>Condition</th>
                  <th class="text-right">Actions</th>
                </tr>
              </thead>
              <tbody id="rules-table-body">
                <!-- Rules will be loaded here -->
              </tbody>
            </table>
          </div>
        </div>

        <!-- Add Rule Modal -->
        <div id="addRuleModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
          <div class="bg-white rounded-lg shadow-xl w-full max-w-2xl">
            <div class="flex justify-between items-center border-b px-6 py-4">
              <h3 class="text-lg font-semibold text-gray-800">Add New Business Rule</h3>
              <button onclick="toggleAddRuleModal()" class="text-gray-400 hover:text-gray-500">
                <i class="fas fa-times"></i>
              </button>
            </div>

            <div class="p-6">
              <form id="addRuleForm" class="space-y-4">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                  <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Rule ID</label>
                    <input name="rule_id" class="w-full border px-3 py-2 rounded-md" placeholder="rule_15" required>
                  </div>
                  <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Level</label>
                    <select name="level" class="w-full border px-3 py-2 rounded-md" required>
                      <option value="0">Level 0 - Basic Data Retrieval</option>
                      <option value="1">Level 1 - Joined Data</option>
                      <option value="2">Level 2 - Super Function</option>
                    </select>
                  </div>
                </div>

                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-1">Description</label>
                  <input name="description" class="w-full border px-3 py-2 rounded-md" placeholder="Rule description" required>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                  <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Function</label>
                    <input name="function_name" class="w-full border px-3 py-2 rounded-md" placeholder="get_cust_acc" required>
                  </div>
                  <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Column</label>
                    <input name="column" class="w-full border px-3 py-2 rounded-md" placeholder="balance">
                  </div>
                  <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Condition</label>
                    <input name="condition" class="w-full border px-3 py-2 rounded-md" placeholder=">">
                  </div>
                </div>

                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-1">Value</label>
                  <input name="value" class="w-full border px-3 py-2 rounded-md" placeholder="1000">
                </div>

                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-1">Custom Code (optional)</label>
                  <textarea name="code" class="w-full border px-3 py-2 rounded-md h-32 font-mono text-sm" placeholder="Custom rule code using 'df' as DataFrame"></textarea>
                </div>
              </form>
            </div>

            <div class="flex justify-end space-x-3 border-t px-6 py-4">
              <button onclick="toggleAddRuleModal()" class="px-4 py-2 border rounded-md text-gray-700 hover:bg-gray-50">Cancel</button>
              <button onclick="addRule()" class="deloitte-btn-primary px-4 py-2 rounded-md font-medium">
                <i class="fas fa-save mr-2"></i>Save Rule
              </button>
            </div>
          </div>
        </div>

        <!-- Run Rule Modal -->
        <div id="runRuleModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
          <div class="bg-white rounded-lg shadow-xl w-full max-w-4xl">
            <div class="flex justify-between items-center border-b px-6 py-4">
              <h3 class="text-lg font-semibold text-gray-800">Run Rule: <span id="run-rule-title"></span></h3>
              <button onclick="toggleRunRuleModal()" class="text-gray-400 hover:text-gray-500">
                <i class="fas fa-times"></i>
              </button>
            </div>

            <div class="p-6">
              <div id="rule-output-container" class="bg-gray-50 rounded-md overflow-hidden border border-gray-200">
                <div class="overflow-x-auto">
                  <table class="data-table">
                    <thead>
                      <tr>
                        <th>Customer ID</th>
                        <th>Name</th>
                        <th>Account No</th>
                        <th>Balance</th>
                        <th>Status</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td>CUST001</td>
                        <td>John Smith</td>
                        <td>ACC10001</td>
                        <td class="text-right">$12,450.00</td>
                        <td><span class="px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full">Active</span></td>
                      </tr>
                      <tr>
                        <td>CUST002</td>
                        <td>Sarah Johnson</td>
                        <td>ACC10002</td>
                        <td class="text-right">$8,720.50</td>
                        <td><span class="px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full">Active</span></td>
                      </tr>
                      <tr>
                        <td>CUST003</td>
                        <td>Michael Brown</td>
                        <td>ACC10003</td>
                        <td class="text-right">$15,200.00</td>
                        <td><span class="px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full">Active</span></td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>

            <div class="flex justify-end space-x-3 border-t px-6 py-4">
              <button onclick="toggleRunRuleModal()" class="px-4 py-2 border rounded-md text-gray-700 hover:bg-gray-50">Close</button>
              <button class="deloitte-btn-primary px-4 py-2 rounded-md font-medium">
                <i class="fas fa-download mr-2"></i>Export Results
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Functions Page -->
      <div id="functions-page" class="hidden">
        <div class="mb-6">
          <h2 class="text-2xl font-semibold text-gray-800 mb-1">🧮 Data Functions</h2>
          <p class="text-gray-600">Execute and manage data retrieval functions</p>
        </div>

        <!-- Level Descriptions -->
        <div class="mb-8 space-y-4">
          <div class="p-4 border border-green-100 rounded-lg bg-green-50">
            <div class="flex items-center mb-2">
              <span class="level-badge badge-0 mr-2">Level 0</span>
              <h3 class="text-lg font-medium">Basic Data Retrieval</h3>
            </div>
            <div class="pl-10">
              <p class="text-gray-700">Direct access to individual database tables with comprehensive filtering capabilities. These functions provide the foundation for all data operations.</p>
              <ul class="list-disc pl-5 text-gray-600 mt-2 space-y-1">
                <li>Single-table operations</li>
                <li>Multiple filter parameters</li>
                <li>Exact and partial matching</li>
                <li>Date range filtering</li>
                <li>High performance</li>
              </ul>
            </div>
          </div>

          <div class="p-4 border border-yellow-100 rounded-lg bg-yellow-50">
            <div class="flex items-center mb-2">
              <span class="level-badge badge-1 mr-2">Level 1</span>
              <h3 class="text-lg font-medium">Joined Data Retrieval</h3>
            </div>
            <div class="pl-10">
              <p class="text-gray-700">Combine two related entities with configurable join operations for relationship analysis.</p>
              <ul class="list-disc pl-5 text-gray-600 mt-2 space-y-1">
                <li>Flexible join types (inner, left, etc.)</li>
                <li>Custom join conditions</li>
                <li>Pre-join filtering</li>
                <li>Post-join filtering</li>
                <li>Optimized for common join patterns</li>
              </ul>
            </div>
          </div>

          <div class="p-4 border border-red-100 rounded-lg bg-red-50">
            <div class="flex items-center mb-2">
              <span class="level-badge badge-2 mr-2">Level 2</span>
              <h3 class="text-lg font-medium">Super Function</h3>
            </div>
            <div class="pl-10">
              <p class="text-gray-700">Comprehensive analysis joining all three core tables for complete lifecycle visibility.</p>
              <ul class="list-disc pl-5 text-gray-600 mt-2 space-y-1">
                <li>End-to-end data correlation</li>
                <li>Multi-level filtering</li>
                <li>Complex analytics support</li>
                <li>Full traceability</li>
                <li>Advanced business rule implementation</li>
              </ul>
            </div>
          </div>
        </div>

        <!-- Function Documentation -->
        <div class="space-y-6">
          <!-- get_customers -->
          <div class="function-card p-4 border rounded-lg hover:border-green-200 transition-colors">
            <div class="flex items-center mb-2">
              <span class="level-badge badge-0 mr-3">L0</span>
              <h3 class="text-lg font-semibold">get_customers</h3>
            </div>
            <p class="text-gray-600 mb-3">Retrieves customer data with various filtering options</p>

            <div class="bg-gray-50 p-3 rounded-md">
              <h4 class="font-medium text-gray-700 mb-2">Parameters:</h4>
              <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                <div>
                  <p class="text-sm font-medium">customer_id <span class="text-gray-500 font-normal">(string|array)</span></p>
                  <p class="text-xs text-gray-500">One or more customer IDs to retrieve</p>
                </div>
                <div>
                  <p class="text-sm font-medium">name <span class="text-gray-500 font-normal">(string)</span></p>
                  <p class="text-xs text-gray-500">Customer name (exact or partial match)</p>
                </div>
                <div>
                  <p class="text-sm font-medium">city <span class="text-gray-500 font-normal">(string|array)</span></p>
                  <p class="text-xs text-gray-500">Filter by city/cities</p>
                </div>
                <div>
                  <p class="text-sm font-medium">update_date <span class="text-gray-500 font-normal">(string|array)</span></p>
                  <p class="text-xs text-gray-500">Specific date(s) in YYYY-MM-DD format</p>
                </div>
                <div>
                  <p class="text-sm font-medium">exact_match <span class="text-gray-500 font-normal">(boolean)</span></p>
                  <p class="text-xs text-gray-500">Set to false for partial matching</p>
                </div>
                <div>
                  <p class="text-sm font-medium">min_update_date <span class="text-gray-500 font-normal">(string)</span></p>
                  <p class="text-xs text-gray-500">Start of date range</p>
                </div>
                <div>
                  <p class="text-sm font-medium">max_update_date <span class="text-gray-500 font-normal">(string)</span></p>
                  <p class="text-xs text-gray-500">End of date range</p>
                </div>
              </div>
            </div>
          </div>

          <!-- get_accounts -->
          <div class="function-card p-4 border rounded-lg hover:border-green-200 transition-colors">
            <div class="flex items-center mb-2">
              <span class="level-badge badge-0 mr-3">L0</span>
              <h3 class="text-lg font-semibold">get_accounts</h3>
            </div>
            <p class="text-gray-600 mb-3">Retrieves account data with filtering capabilities</p>

            <div class="bg-gray-50 p-3 rounded-md">
              <h4 class="font-medium text-gray-700 mb-2">Parameters:</h4>
              <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                <div>
                  <p class="text-sm font-medium">account_no <span class="text-gray-500 font-normal">(string|array)</span></p>
                  <p class="text-xs text-gray-500">One or more account numbers</p>
                </div>
                <div>
                  <p class="text-sm font-medium">account_type <span class="text-gray-500 font-normal">(string|array)</span></p>
                  <p class="text-xs text-gray-500">Type of account (savings, checking, etc.)</p>
                </div>
                <div>
                  <p class="text-sm font-medium">customer_id <span class="text-gray-500 font-normal">(string|array)</span></p>
                  <p class="text-xs text-gray-500">Filter by customer ID(s)</p>
                </div>
                <div>
                  <p class="text-sm font-medium">account_status <span class="text-gray-500 font-normal">(string|array)</span></p>
                  <p class="text-xs text-gray-500">Status (active, closed, etc.)</p>
                </div>
                <div>
                  <p class="text-sm font-medium">activation_date <span class="text-gray-500 font-normal">(string|array)</span></p>
                  <p class="text-xs text-gray-500">Specific activation date(s)</p>
                </div>
                <div>
                  <p class="text-sm font-medium">exact_match <span class="text-gray-500 font-normal">(boolean)</span></p>
                  <p class="text-xs text-gray-500">Set to false for partial matching</p>
                </div>
                <div>
                  <p class="text-sm font-medium">min_activation_date <span class="text-gray-500 font-normal">(string)</span></p>
                  <p class="text-xs text-gray-500">Earliest activation date</p>
                </div>
                <div>
                  <p class="text-sm font-medium">max_activation_date <span class="text-gray-500 font-normal">(string)</span></p>
                  <p class="text-xs text-gray-500">Latest activation date</p>
                </div>
              </div>
            </div>
          </div>

          <!-- get_transactions -->
          <div class="function-card p-4 border rounded-lg hover:border-green-200 transition-colors">
            <div class="flex items-center mb-2">
              <span class="level-badge badge-0 mr-3">L0</span>
              <h3 class="text-lg font-semibold">get_transactions</h3>
            </div>
            <p class="text-gray-600 mb-3">Retrieves transaction data with various filters</p>

            <div class="bg-gray-50 p-3 rounded-md">
              <h4 class="font-medium text-gray-700 mb-2">Parameters:</h4>
              <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                <div>
                  <p class="text-sm font-medium">transaction_id <span class="text-gray-500 font-normal">(string|array)</span></p>
                  <p class="text-xs text-gray-500">One or more transaction IDs</p>
                </div>
                <div>
                  <p class="text-sm font-medium">account_no <span class="text-gray-500 font-normal">(string|array)</span></p>
                  <p class="text-xs text-gray-500">Filter by account number(s)</p>
                </div>
                <div>
                  <p class="text-sm font-medium">customer_id <span class="text-gray-500 font-normal">(string|array)</span></p>
                  <p class="text-xs text-gray-500">Filter by customer ID(s)</p>
                </div>
                <div>
                  <p class="text-sm font-medium">amount <span class="text-gray-500 font-normal">(number|array)</span></p>
                  <p class="text-xs text-gray-500">Exact amount value(s)</p>
                </div>
                <div>
                  <p class="text-sm font-medium">min_amount <span class="text-gray-500 font-normal">(number)</span></p>
                  <p class="text-xs text-gray-500">Minimum transaction amount</p>
                </div>
                <div>
                  <p class="text-sm font-medium">max_amount <span class="text-gray-500 font-normal">(number)</span></p>
                  <p class="text-xs text-gray-500">Maximum transaction amount</p>
                </div>
                <div>
                  <p class="text-sm font-medium">transaction_time <span class="text-gray-500 font-normal">(string|array)</span></p>
                  <p class="text-xs text-gray-500">Specific timestamp(s)</p>
                </div>
                <div>
                  <p class="text-sm font-medium">min_transaction_time <span class="text-gray-500 font-normal">(string)</span></p>
                  <p class="text-xs text-gray-500">Earliest transaction time</p>
                </div>
                <div>
                  <p class="text-sm font-medium">max_transaction_time <span class="text-gray-500 font-normal">(string)</span></p>
                  <p class="text-xs text-gray-500">Latest transaction time</p>
                </div>
              </div>
            </div>
          </div>

          <!-- get_cust_acc -->
          <div class="function-card p-4 border rounded-lg hover:border-green-200 transition-colors">
            <div class="flex items-center mb-2">
              <span class="level-badge badge-1 mr-3">L1</span>
              <h3 class="text-lg font-semibold">get_cust_acc</h3>
            </div>
            <p class="text-gray-600 mb-3">Joins customer and account data</p>

            <div class="bg-gray-50 p-3 rounded-md">
              <h4 class="font-medium text-gray-700 mb-2">Parameters:</h4>
              <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                <div>
                  <p class="text-sm font-medium">join_type <span class="text-gray-500 font-normal">(string)</span></p>
                  <p class="text-xs text-gray-500">Type of join (left, inner, etc.)</p>
                </div>
                <div>
                  <p class="text-sm font-medium">customer_on <span class="text-gray-500 font-normal">(string|array)</span></p>
                  <p class="text-xs text-gray-500">Customer table join column(s)</p>
                </div>
                <div>
                  <p class="text-sm font-medium">account_on <span class="text-gray-500 font-normal">(string|array)</span></p>
                  <p class="text-xs text-gray-500">Account table join column(s)</p>
                </div>
                <div>
                  <p class="text-sm font-medium">customer_filters <span class="text-gray-500 font-normal">(object)</span></p>
                  <p class="text-xs text-gray-500">Filters to apply to customer data</p>
                </div>
                <div>
                  <p class="text-sm font-medium">account_filters <span class="text-gray-500 font-normal">(object)</span></p>
                  <p class="text-xs text-gray-500">Filters to apply to account data</p>
                </div>
              </div>
            </div>
          </div>

          <!-- get_cust_tran -->
          <div class="function-card p-4 border rounded-lg hover:border-green-200 transition-colors">
            <div class="flex items-center mb-2">
              <span class="level-badge badge-1 mr-3">L1</span>
              <h3 class="text-lg font-semibold">get_cust_tran</h3>
            </div>
            <p class="text-gray-600 mb-3">Joins customer and transaction data</p>

            <div class="bg-gray-50 p-3 rounded-md">
              <h4 class="font-medium text-gray-700 mb-2">Parameters:</h4>
              <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                <div>
                  <p class="text-sm font-medium">join_type <span class="text-gray-500 font-normal">(string)</span></p>
                  <p class="text-xs text-gray-500">Type of join (left, inner, etc.)</p>
                </div>
                <div>
                  <p class="text-sm font-medium">customer_on <span class="text-gray-500 font-normal">(string|array)</span></p>
                  <p class="text-xs text-gray-500">Customer table join column(s)</p>
                </div>
                <div>
                  <p class="text-sm font-medium">transaction_on <span class="text-gray-500 font-normal">(string|array)</span></p>
                  <p class="text-xs text-gray-500">Transaction table join column(s)</p>
                </div>
                <div>
                  <p class="text-sm font-medium">customer_filters <span class="text-gray-500 font-normal">(object)</span></p>
                  <p class="text-xs text-gray-500">Filters to apply to customer data</p>
                </div>
                <div>
                  <p class="text-sm font-medium">transaction_filters <span class="text-gray-500 font-normal">(object)</span></p>
                  <p class="text-xs text-gray-500">Filters to apply to transaction data</p>
                </div>
              </div>
            </div>
          </div>

          <!-- get_acc_tran -->
          <div class="function-card p-4 border rounded-lg hover:border-green-200 transition-colors">
            <div class="flex items-center mb-2">
              <span class="level-badge badge-1 mr-3">L1</span>
              <h3 class="text-lg font-semibold">get_acc_tran</h3>
            </div>
            <p class="text-gray-600 mb-3">Joins account and transaction data</p>

            <div class="bg-gray-50 p-3 rounded-md">
              <h4 class="font-medium text-gray-700 mb-2">Parameters:</h4>
              <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                <div>
                  <p class="text-sm font-medium">join_type <span class="text-gray-500 font-normal">(string)</span></p>
                  <p class="text-xs text-gray-500">Type of join (left, inner, etc.)</p>
                </div>
                <div>
                  <p class="text-sm font-medium">account_on <span class="text-gray-500 font-normal">(string|array)</span></p>
                  <p class="text-xs text-gray-500">Account table join column(s)</p>
                </div>
                <div>
                  <p class="text-sm font-medium">transaction_on <span class="text-gray-500 font-normal">(string|array)</span></p>
                  <p class="text-xs text-gray-500">Transaction table join column(s)</p>
                </div>
                <div>
                  <p class="text-sm font-medium">account_filters <span class="text-gray-500 font-normal">(object)</span></p>
                  <p class="text-xs text-gray-500">Filters to apply to account data</p>
                </div>
                <div>
                  <p class="text-sm font-medium">transaction_filters <span class="text-gray-500 font-normal">(object)</span></p>
                  <p class="text-xs text-gray-500">Filters to apply to transaction data</p>
                </div>
              </div>
            </div>
          </div>

          <!-- get_cust_acc_tran -->
          <div class="function-card p-4 border rounded-lg hover:border-green-200 transition-colors">
            <div class="flex items-center mb-2">
              <span class="level-badge badge-2 mr-3">L2</span>
              <h3 class="text-lg font-semibold">get_cust_acc_tran</h3>
            </div>
            <p class="text-gray-600 mb-3">Joins all three core tables (customers, accounts, transactions)</p>

            <div class="bg-gray-50 p-3 rounded-md">
              <h4 class="font-medium text-gray-700 mb-2">Parameters:</h4>
              <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                <div>
                  <p class="text-sm font-medium">join_type <span class="text-gray-500 font-normal">(string)</span></p>
                  <p class="text-xs text-gray-500">Type of join (left, inner, etc.)</p>
                </div>
                <div>
                  <p class="text-sm font-medium">customer_account_key <span class="text-gray-500 font-normal">(string|array)</span></p>
                  <p class="text-xs text-gray-500">Join key(s) between customers and accounts</p>
                </div>
                <div>
                  <p class="text-sm font-medium">account_transaction_key <span class="text-gray-500 font-normal">(string|array)</span></p>
                  <p class="text-xs text-gray-500">Join key(s) between accounts and transactions</p>
                </div>
                <div>
                  <p class="text-sm font-medium">customer_filters <span class="text-gray-500 font-normal">(object)</span></p>
                  <p class="text-xs text-gray-500">Filters to apply to customer data</p>
                </div>
                <div>
                  <p class="text-sm font-medium">account_filters <span class="text-gray-500 font-normal">(object)</span></p>
                  <p class="text-xs text-gray-500">Filters to apply to account data</p>
                </div>
                <div>
                  <p class="text-sm font-medium">transaction_filters <span class="text-gray-500 font-normal">(object)</span></p>
                  <p class="text-xs text-gray-500">Filters to apply to transaction data</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Documentation Page -->
      <div id="documentation-page" class="hidden">
        <div class="mb-6">
          <h2 class="text-2xl font-semibold text-gray-800 mb-1">Documentation</h2>
          <p class="text-gray-600">Comprehensive guide to using the Business Rule Engine</p>
        </div>

        <div class="deloitte-card p-6">
          <div class="space-y-8">
            <section>
              <h3 class="text-xl font-semibold text-gray-800 mb-4">Levels Overview</h3>

              <div class="space-y-6">
                <div class="p-5 border border-green-100 rounded-lg bg-green-50">
                  <div class="flex items-center mb-3">
                    <span class="level-badge badge-0 mr-3">Level 0</span>
                    <h4 class="text-lg font-medium text-gray-800">Basic Data Retrieval</h4>
                  </div>
                  <div class="pl-12 space-y-2">
                    <p class="text-gray-700">These are the foundational functions that fetch raw, unjoined data directly from the database tables. They provide the building blocks for all analysis and are optimized for flexible filtering.</p>
                    <ul class="list-disc pl-5 text-gray-600 space-y-1">
                      <li>Direct access to single-table data</li>
                      <li>Multiple filtering options for precise queries</li>
                      <li>Support for exact and partial matching</li>
                      <li>Date range filtering capabilities</li>
                      <li>Lightweight and fast execution</li>
                    </ul>
                    <p class="text-sm text-gray-500 mt-2"><strong>Example Use Cases:</strong> Customer lookup, account verification, transaction auditing</p>
                  </div>
                </div>

                <div class="p-5 border border-yellow-100 rounded-lg bg-yellow-50">
                  <div class="flex items-center mb-3">
                    <span class="level-badge badge-1 mr-3">Level 1</span>
                    <h4 class="text-lg font-medium text-gray-800">Joined Data Retrieval</h4>
                  </div>
                  <div class="pl-12 space-y-2">
                    <p class="text-gray-700">These functions combine two related entities through configurable join operations, enabling relationship analysis and cross-table validation.</p>
                    <ul class="list-disc pl-5 text-gray-600 space-y-1">
                      <li>Flexible join types (inner, left, etc.)</li>
                      <li>Configurable join keys</li>
                      <li>Pre-join filtering options</li>
                      <li>Post-join filtering capabilities</li>
                      <li>Optimized for common join patterns</li>
                    </ul>
                    <p class="text-sm text-gray-500 mt-2"><strong>Example Use Cases:</strong> Customer-account matching, transaction verification, relationship analysis</p>
                  </div>
                </div>

                <div class="p-5 border border-red-100 rounded-lg bg-red-50">
                  <div class="flex items-center mb-3">
                    <span class="level-badge badge-2 mr-3">Level 2</span>
                    <h4 class="text-lg font-medium text-gray-800">Super Function</h4>
                  </div>
                  <div class="pl-12 space-y-2">
                    <p class="text-gray-700">This comprehensive function joins all three core tables (customers, accounts, transactions) to enable complete lifecycle analysis and complex business rule implementation.</p>
                    <ul class="list-disc pl-5 text-gray-600 space-y-1">
                      <li>End-to-end data correlation</li>
                      <li>Configurable join paths</li>
                      <li>Granular filtering at each level</li>
                      <li>Support for complex analytics</li>
                      <li>Traceability across entities</li>
                    </ul>
                    <p class="text-sm text-gray-500 mt-2"><strong>Example Use Cases:</strong> Fraud detection, customer behavior analysis, compliance monitoring</p>
                  </div>
                </div>
              </div>
            </section>

            <section>
              <h3 class="text-xl font-semibold text-gray-800 mb-4">Function Reference</h3>

              <div class="space-y-4">
                <div class="border rounded-lg overflow-hidden">
                  <table class="data-table">
                    <thead>
                      <tr>
                        <th>Function</th>
                        <th>Level</th>
                        <th>Description</th>
                        <th>Parameters</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td class="font-medium">get_customers</td>
                        <td><span class="level-badge badge-0">0</span></td>
                        <td>Retrieve customer data with various filtering options</td>
                        <td>customer_id, name, city, update_date, exact_match, min/max_update_date</td>
                      </tr>
                      <tr>
                        <td class="font-medium">get_accounts</td>
                        <td><span class="level-badge badge-0">0</span></td>
                        <td>Retrieve account data with filtering capabilities</td>
                        <td>account_no, account_type, customer_id, account_status, activation_date, exact_match, min/max_activation_date</td>
                      </tr>
                      <tr>
                        <td class="font-medium">get_transactions</td>
                        <td><span class="level-badge badge-0">0</span></td>
                        <td>Retrieve transaction data with various filters</td>
                        <td>transaction_id, account_no, customer_id, amount, min/max_amount, transaction_time, min/max_transaction_time</td>
                      </tr>
                      <tr>
                        <td class="font-medium">get_cust_acc</td>
                        <td><span class="level-badge badge-1">1</span></td>
                        <td>Join customer and account data</td>
                        <td>join_type, customer_on, account_on, customer_filters, account_filters</td>
                      </tr>
                      <tr>
                        <td class="font-medium">get_cust_tran</td>
                        <td><span class="level-badge badge-1">1</span></td>
                        <td>Join customer and transaction data</td>
                        <td>join_type, customer_on, transaction_on, customer_filters, transaction_filters</td>
                      </tr>
                      <tr>
                        <td class="font-medium">get_acc_tran</td>
                        <td><span class="level-badge badge-1">1</span></td>
                        <td>Join account and transaction data</td>
                        <td>join_type, account_on, transaction_on, account_filters, transaction_filters</td>
                      </tr>
                      <tr>
                        <td class="font-medium">get_cust_acc_tran</td>
                        <td><span class="level-badge badge-2">2</span></td>
                        <td>Join all three core tables</td>
                        <td>join_type, customer_account_key, account_transaction_key, customer_filters, account_filters, transaction_filters</td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </section>

            <section>
              <h3 class="text-xl font-semibold text-gray-800 mb-4">Rule Creation Guide</h3>

              <div class="space-y-4">
                <div class="p-4 border rounded-lg bg-gray-50">
                  <h4 class="font-medium text-gray-800 mb-2">Basic Rule Structure</h4>
                  <div class="bg-gray-800 text-green-400 p-3 rounded-md font-mono text-sm overflow-x-auto">
                    <pre>rule_id: unique_identifier
description: "Description of rule purpose"
level: 0 | 1 | 2
function_name: "name_of_function"
column: "column_to_evaluate"
condition: "> | < | == | contains"
value: threshold_value
code: "optional_custom_code"</pre>
                  </div>
                </div>

                <div class="p-4 border rounded-lg bg-gray-50">
                  <h4 class="font-medium text-gray-800 mb-2">Example Rules</h4>

                  <div class="space-y-3">
                    <div>
                      <p class="text-sm font-medium text-gray-700">Level 0 Example:</p>
                      <div class="bg-gray-100 p-2 rounded text-sm font-mono">
                        rule_01: Identify inactive customers<br>
                        function_name: get_customers<br>
                        column: last_activity<br>
                        condition: "<"<br>
                        value: "2023-01-01"
                      </div>
                    </div>

                    <div>
                      <p class="text-sm font-medium text-gray-700">Level 1 Example:</p>
                      <div class="bg-gray-100 p-2 rounded text-sm font-mono">
                        rule_02: Flag high balance accounts<br>
                        function_name: get_cust_acc<br>
                        column: balance<br>
                        condition: ">"<br>
                        value: 10000
                      </div>
                    </div>

                    <div>
                      <p class="text-sm font-medium text-gray-700">Level 2 Example:</p>
                      <div class="bg-gray-100 p-2 rounded text-sm font-mono">
                        rule_03: Detect suspicious patterns<br>
                        function_name: get_cust_acc_tran<br>
                        code: "df[(df.amount > 5000) & (df.frequency > 5)]"
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </section>
          </div>
        </div>
      </div>
    </main>
  </div>

  <script>
    // Sample rules data
    const sampleRules = [
      { id: "rule_01", description: "Identify inactive customers", level: "0", function: "get_customers", condition: "last_activity < '2023-01-01'" },
      { id: "rule_02", description: "Flag high balance accounts", level: "1", function: "get_cust_acc", condition: "balance > 10000" },
      { id: "rule_03", description: "Detect suspicious transactions", level: "2", function: "get_cust_acc_tran", condition: "amount > 5000 AND frequency > 5" },
      { id: "rule_04", description: "Find new customers", level: "0", function: "get_customers", condition: "signup_date > '2023-06-01'" },
      { id: "rule_05", description: "Identify dormant accounts", level: "1", function: "get_acc_tran", condition: "last_transaction < '2023-01-01'" },
      { id: "rule_06", description: "Flag international transactions", level: "0", function: "get_transactions", condition: "country != 'US'" },
      { id: "rule_07", description: "Find high-risk customers", level: "2", function: "get_cust_acc_tran", condition: "risk_score > 80" },
      { id: "rule_08", description: "Identify premium customers", level: "1", function: "get_cust_acc", condition: "account_type = 'premium'" },
      { id: "rule_09", description: "Find large cash withdrawals", level: "0", function: "get_transactions", condition: "amount > 5000 AND type = 'withdrawal'" },
      { id: "rule_10", description: "Detect unusual activity", level: "2", function: "get_cust_acc_tran", condition: "hour(transaction_time) BETWEEN 1 AND 5" },
      { id: "rule_11", description: "Find accounts nearing limit", level: "1", function: "get_cust_acc", condition: "balance > (limit * 0.9)" },
      { id: "rule_12", description: "Identify expiring documents", level: "0", function: "get_customers", condition: "doc_expiry < CURRENT_DATE + INTERVAL 30 DAY" },
      { id: "rule_13", description: "Flag potential fraud", level: "2", function: "get_cust_acc_tran", condition: "velocity > 1000 AND new_device = true" },
      { id: "rule_14", description: "Find inactive customers with balances", level: "1", function: "get_cust_acc", condition: "last_activity < '2023-01-01' AND balance > 0" },
      { id: "rule_15", description: "Identify high-value transactions", level: "0", function: "get_transactions", condition: "amount > 10000" }
    ];

    // Function definitions
    const functionDefinitions = {
      get_customers: {
        description: "Retrieve customer data with various filtering options",
        level: 0,
        parameters: [
          { name: "customer_id", type: "string|array", description: "ID(s) of customers to retrieve" },
          { name: "name", type: "string", description: "Exact or partial match for customer name" },
          { name: "city", type: "string|array", description: "Filter by city name(s)" },
          { name: "update_date", type: "string|array", description: "Filter specific dates (YYYY-MM-DD)" },
          { name: "exact_match", type: "boolean", description: "Set to false for partial matching" },
          { name: "min_update_date", type: "string", description: "Minimum date for update_date range" },
          { name: "max_update_date", type: "string", description: "Maximum date for update_date range" }
        ]
      },
      get_accounts: {
        description: "Retrieve account data with filtering capabilities",
        level: 0,
        parameters: [
          { name: "account_no", type: "string|array", description: "One or more account numbers" },
          { name: "account_type", type: "string|array", description: "Account type (e.g., savings, current)" },
          { name: "customer_id", type: "string|array", description: "Filter by customer IDs" },
          { name: "account_status", type: "string|array", description: "e.g., active, closed" },
          { name: "activation_date", type: "string|array", description: "Filter by activation date(s)" },
          { name: "exact_match", type: "boolean", description: "Set to false for partial search" },
          { name: "min_activation_date", type: "string", description: "Minimum activation date" },
          { name: "max_activation_date", type: "string", description: "Maximum activation date" }
        ]
      },
      get_transactions: {
        description: "Retrieve transaction data with various filters",
        level: 0,
        parameters: [
          { name: "transaction_id", type: "string|array", description: "Filter by transaction ID(s)" },
          { name: "account_no", type: "string|array", description: "Account numbers involved" },
          { name: "customer_id", type: "string|array", description: "Customer IDs involved" },
          { name: "amount", type: "number|array", description: "Exact amount value(s)" },
          { name: "min_amount", type: "number", description: "Minimum transaction amount" },
          { name: "max_amount", type: "number", description: "Maximum transaction amount" },
          { name: "transaction_time", type: "string|array", description: "Specific transaction timestamp(s)" },
          { name: "min_transaction_time", type: "string", description: "Earliest transaction time" },
          { name: "max_transaction_time", type: "string", description: "Latest transaction time" }
        ]
      },
      get_cust_acc: {
        description: "Join customer and account data",
        level: 1,
        parameters: [
          { name: "join_type", type: "string", description: "Type of join ('left', 'inner')" },
          { name: "customer_on", type: "string|array", description: "Column(s) in customer data to join on" },
          { name: "account_on", type: "string|array", description: "Column(s) in account data to join on" },
          { name: "customer_filters", type: "object", description: "Filters for customer data" },
          { name: "account_filters", type: "object", description: "Filters for account data" }
        ]
      },
      get_cust_tran: {
        description: "Join customer and transaction data",
        level: 1,
        parameters: [
          { name: "join_type", type: "string", description: "Type of join ('left', 'inner')" },
          { name: "customer_on", type: "string|array", description: "Key(s) from customer table" },
          { name: "transaction_on", type: "string|array", description: "Key(s) from transaction table" },
          { name: "customer_filters", type: "object", description: "Filters for customers" },
          { name: "transaction_filters", type: "object", description: "Filters for transactions" }
        ]
      },
      get_acc_tran: {
        description: "Join account and transaction data",
        level: 1,
        parameters: [
          { name: "join_type", type: "string", description: "Type of join ('left', 'inner')" },
          { name: "account_on", type: "string|array", description: "Key(s) from account table" },
          { name: "transaction_on", type: "string|array", description: "Key(s) from transaction table" },
          { name: "account_filters", type: "object", description: "Filters for accounts" },
          { name: "transaction_filters", type: "object", description: "Filters for transactions" }
        ]
      },
      get_cust_acc_tran: {
        description: "Join all three core tables (customers, accounts, transactions)",
        level: 2,
        parameters: [
          { name: "join_type", type: "string", description: "Type of join ('left', 'inner')" },
          { name: "customer_account_key", type: "string|array", description: "Join key(s) between customers and accounts" },
          { name: "account_transaction_key", type: "string|array", description: "Join key(s) between accounts and transactions" },
          { name: "customer_filters", type: "object", description: "Filters for customers" },
          { name: "account_filters", type: "object", description: "Filters for accounts" },
          { name: "transaction_filters", type: "object", description: "Filters for transactions" }
        ]
      }
    };

    // Navigation between pages
    function navigateTo(page) {
      document.getElementById('dashboard-page').classList.add('hidden');
      document.getElementById('rules-page').classList.add('hidden');
      document.getElementById('functions-page').classList.add('hidden');
      document.getElementById('documentation-page').classList.add('hidden');

      document.getElementById(`${page}-page`).classList.remove('hidden');
      document.getElementById('page-title').textContent = document.querySelector(`a[href="#${page}"]`).textContent.trim();

      // Update active nav link
      document.querySelectorAll('.nav-link').forEach(link => {
        link.classList.remove('active');
      });
      document.querySelector(`a[href="#${page}"]`).classList.add('active');

      // Load content if needed
      if (page === 'rules') {
        loadRules();
      }
    }

    // Initialize navigation
    document.querySelectorAll('a[href^="#"]').forEach(link => {
      link.addEventListener('click', function(e) {
        e.preventDefault();
        const page = this.getAttribute('href').substring(1);
        navigateTo(page);
      });
    });

    // Toggle modals
    function toggleAddRuleModal() {
      document.getElementById('addRuleModal').classList.toggle('hidden');
    }

    function toggleRunRuleModal(ruleId = '', description = '') {
      const modal = document.getElementById('runRuleModal');
      if (ruleId) {
        document.getElementById('run-rule-title').textContent = `${ruleId} - ${description}`;
      }
      modal.classList.toggle('hidden');
    }

    // Load rules into table
    function loadRules() {
      const tbody = document.getElementById('rules-table-body');
      tbody.innerHTML = '';

      sampleRules.forEach(rule => {
        const row = document.createElement('tr');

        // Determine level badge
        let levelBadge = '';
        if (rule.level === '0') {
          levelBadge = '<span class="level-badge badge-0">Level 0</span>';
        } else if (rule.level === '1') {
          levelBadge = '<span class="level-badge badge-1">Level 1</span>';
        } else {
          levelBadge = '<span class="level-badge badge-2">Level 2</span>';
        }

        row.innerHTML = `
          <td class="font-medium">${rule.id}</td>
          <td>${rule.description}</td>
          <td>${levelBadge}</td>
          <td>${rule.function}</td>
          <td>${rule.condition}</td>
          <td class="text-right">
            <button onclick="toggleRunRuleModal('${rule.id}', '${rule.description}')" class="text-green-600 hover:text-green-900 mr-3">Run</button>
            <button class="text-blue-600 hover:text-blue-900 mr-3">Edit</button>
            <button class="text-red-600 hover:text-red-900">Delete</button>
          </td>
        `;

        tbody.appendChild(row);
      });
    }

    // Update function parameters form
    function updateFunctionFields() {
      const funcName = document.getElementById('functionSelect').value;
      const paramsContainer = document.getElementById('functionParams');

      if (!funcName) {
        paramsContainer.innerHTML = `
          <div class="text-center py-8 text-gray-400">
            <i class="fas fa-functions text-3xl mb-2"></i>
            <p>Select a function to view parameters</p>
          </div>
        `;
        return;
      }

      const func = functionDefinitions[funcName];
      let html = `
        <div class="mb-4 p-3 bg-gray-50 rounded-md">
          <h4 class="font-medium text-gray-800 mb-1">${funcName}</h4>
          <p class="text-sm text-gray-600">${func.description}</p>
        </div>
      `;

      func.parameters.forEach(param => {
        html += `
          <div class="space-y-1">
            <label class="block text-sm font-medium text-gray-700">
              ${param.name}
              <span class="text-xs font-normal text-gray-500 ml-1">(${param.type})</span>
            </label>
            <input name="${param.name}" class="w-full border px-3 py-2 rounded-md text-sm" placeholder="${param.description}">
          </div>
        `;
      });

      paramsContainer.innerHTML = html;
    }

    // Run function (simulated)
    function runFunction() {
      const funcName = document.getElementById('functionSelect').value;
      if (!funcName) {
        alert('Please select a function first');
        return;
      }

      const outputContainer = document.getElementById('functionOutput');
      outputContainer.innerHTML = `
        <div class="overflow-x-auto">
          <table class="data-table">
            <thead>
              <tr>
                <th>Customer ID</th>
                <th>Name</th>
                <th>Account No</th>
                <th>Balance</th>
                <th>Status</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>CUST001</td>
                <td>John Smith</td>
                <td>ACC10001</td>
                <td class="text-right">$12,450.00</td>
                <td><span class="px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full">Active</span></td>
              </tr>
              <tr>
                <td>CUST002</td>
                <td>Sarah Johnson</td>
                <td>ACC10002</td>
                <td class="text-right">$8,720.50</td>
                <td><span class="px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full">Active</span></td>
              </tr>
              <tr>
                <td>CUST003</td>
                <td>Michael Brown</td>
                <td>ACC10003</td>
                <td class="text-right">$15,200.00</td>
                <td><span class="px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full">Active</span></td>
              </tr>
            </tbody>
          </table>
        </div>
      `;
    }

    // Add new rule
    function addRule() {
      const form = document.getElementById('addRuleForm');
      const formData = new FormData(form);

      // Validate form
      if (!formData.get('rule_id') || !formData.get('description')) {
        alert('Please fill in all required fields');
        return;
      }

      // Here you would send the data to the backend
      console.log('Adding rule:', Object.fromEntries(formData.entries()));

      // Close modal and refresh rules list
      toggleAddRuleModal();
      form.reset();
      loadRules();
    }

    // Initialize
    document.addEventListener('DOMContentLoaded', function() {
      // Start on dashboard
      navigateTo('dashboard');
    });
  </script>
</body>
</html>
